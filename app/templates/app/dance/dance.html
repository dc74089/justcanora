{% extends 'app/base.html' %}

{% block nav %}

{% endblock %}

{% block style %}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet">

    <style>
        body {
            background-color: #111;
            color: red;
        }

        .marker {
            font-family: "Permanent Marker", cursive;
            font-weight: 400;
            font-style: normal;
            color: red;
        }

        .card {
            background-color: rgb(33, 37, 41);
        }
    </style>

{% endblock %}

{% block script %}
    <script>
        function do_search(cat_id) {
            $.get("{% url 'dance_search' %}", {
                "q": $("#search-" + cat_id).val(),
                "category": cat_id
            }, function (response) {
                $("#results-" + cat_id).html(response)
            })
        }

        function choose(cat_id, song_uri) {
            $.post("{% url 'dance_choose' %}", {
                "category": cat_id,
                "song": song_uri
            }, function (response) {
                $("#results-" + cat_id).html(response)
            })
        }
    </script>
{% endblock %}

{% block content %}
    <h1 class="text-center marker">Halloween Dance Song Requests</h1>
    <div class="row">
        {% for cat in categories %}
            <div class="col-12 col-lg-4">
                <div class="card mt-5">
                    <div class="card-body text-center">
                        <h3 class="marker">{{ cat.name }}</h3>

                        <div class="results-container" id="results-{{ cat.id }}">
                            {{ cat.selected }}
                        </div>

                        <input type="text" class="form-control" id="search-{{ cat.id }}">
                        <a class="btn btn-grad-negative mt-3" onclick="do_search('{{ cat.id }}')">Search</a>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}