{% extends 'app/base.html' %}

{% block script %}
  <script>
      function flag(flagid, status) {
          $.post(
              "{% url 'set_flag' %}",
              {
                  "flag": flagid,
                  "status": status
              }
          ).then(
              function () {
                  location.reload()
              })
      }
  </script>
{% endblock %}

{% block content %}
  <div class="row">
    {% comment %}  	Feature Flags   {% endcomment %}
    <div class="col-12 col-md-6">
      <div class="card">
        <div class="card-body">
          <h2 class="card-title">Feature Flags</h2>
          <table class="table table-hover">
            <tr>
              <th>Flag</th>
              <th>Status</th>
              <th>Action</th>
            </tr>
            {% for flag in flags %}
              <tr>
                <td class="align-middle">{{ flag }}</td>
                <td class="align-middle">{% if flag %}✔️{% else %}❌{% endif %}</td>
                <td>
                  {% if flag %}
                    <a href="#" onclick="flag('{{ flag.id }}', 'false')" class="btn btn-grad-negative w-100">Disable</a>
                  {% else %}
                    <a href="#" onclick="flag('{{ flag.id }}', 'true')" class="btn btn-grad-positive w-100">Enable</a>
                  {% endif %}
                </td>
              </tr>
            {% endfor %}
          </table>
        </div>
      </div>
    </div>
    {% comment %}   Admin Pages   {% endcomment %}
    <div class="col-12 col-md-6">
      <div class="card">
        <div class="card-body">
          <h2 class="card-title">Admin Pages</h2>
          <table class="table table-bordered table-hover">
            <tr>
              <td class="align-middle text-center">View all rosters</td>
              <td><a class="btn btn-grad  w-100" href="{% url 'rosters' %}">Rosters</a></td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>
{% endblock %}